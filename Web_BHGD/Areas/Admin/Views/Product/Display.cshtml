@model Product
@{
    ViewData["Title"] = "Chi tiết sản phẩm";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="admin-header">
    <h2 class="admin-title"><i class="fas fa-info-circle"></i> @ViewData["Title"]</h2>
    <a asp-action="Index" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Quay lại
    </a>
</div>

<div class="detail-card">
    <div class="detail-header">
        <h3>@Model.Name</h3>
        <div class="product-id">ID: @Model.Id</div>
    </div>

    <div class="detail-content">
        <div class="detail-image">
            <img src="@Model.ImageUrl" alt="@Model.Name">
        </div>

        <div class="detail-info">
            <div class="info-row">
                <div class="info-label">Danh mục:</div>
                <div class="info-value">@(Model.Category?.Name ?? "N/A")</div>
            </div>

            <div class="info-row">
                <div class="info-label">Giá:</div>
                <div class="info-value price">@Model.Price.ToString("N0") đ</div>
            </div>

            <div class="info-row">
                <div class="info-label">Tồn kho:</div>
                <div class="info-value">
                    <span class="stock-badge @GetStockClass(Model.Stock)">
                        @Model.Stock (@ViewBag.StockStatus)
                    </span>
                </div>
            </div>

            <div class="info-row">
                <div class="info-label">Đã bán:</div>
                <div class="info-value">@Model.SoldQuantity</div>
            </div>

            <div class="info-row full-row">
                <div class="info-label">Mô tả:</div>
                <div class="info-value">@(Model.Description ?? "Chưa có mô tả")</div>
            </div>

            <div class="sales-progress">
                <div class="progress-label">Tỉ lệ bán hàng: <span>@ViewBag.StockPercentage%</span></div>
                <div class="progress-bar">
                    <div class="progress-value" style="width: @ViewBag.StockPercentage%"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="detail-footer">
        <a asp-action="Update" asp-route-id="@Model.Id" class="btn btn-warning">
            <i class="fas fa-edit"></i> Chỉnh sửa
        </a>
    </div>
</div>

@functions {
    string GetStockClass(int stock)
    {
        return stock switch
        {
            0 => "stock-out",
            <= 10 => "stock-low",
            _ => "stock-ok"
        };
    }
}